---
aliases: []
tags:
  - PL
  - lua
created: 2023-01-31 11:31:14
modified: 2024-03-17 19:29:53
---

# Lua 笔记

---

在 lua 文件顶行加上以下代码：
```lua
#!/usr/bin/lua
```
这样就能使用 `./xx.lua` 方式运行 lua 程序了。

> [!tip]
> `#!` 这个指令必须要顶行，不然会报错，执行不了。
> 
> `#!` 后面跟着的是 lua 调用的路径。可以使用 `whereis lua` 命令，看下当前系统 lua 装在哪。

---

## 变量

### 局部变量

lua 默认将所有变量注册在全局环境表中。默认除了三种情况会定义局部变量：

1. 使用 [local](#local) 关键字显示声明
2. `for` 循环控制语句中定义
3. [函数](#函数) 接收参数时定义

> [!info] 
> 
> 观察可知，除了使用 `local` 显式声明外，其他两种的「默认局部变量」本身从出生就自带有一种「临时性」特征，所以它们成为默认的局部变量是可以理解的。

#### 代码块

代码块，可以是一个控制结构体、一个函数体，或者一个 chunk。

所以，lua 中的「局部变量」与 [C](../C/C_Note.md) 不一样，它不仅仅指的是 [函数](#函数) 中的变量，它是在 [代码块](#代码块) 中定义的变量都称为「局部变量」。

#### local

`local` 关键字定义局部变量，这与 [Shell](../Linux/Shell_Note.md) 还有 [Vimscript 9](../vim/Vimscript9_Note.md) 的语法一样。

`local` 关键字不但能修饰变量，还能修饰 [函数](#函数)。

---

## 运算符

lua 大部分运算符都与 [C语言](../C/C_Note.md) 一样，只有少数运算符不一样。

lua 与 [C语言](../C/C_Note.md) 不同的运算符：

* `~=`：不等于
* `..`：连接运算符，如 `a .. b`，即是将 `a` 和 `b` 作为字符串连接起来。
* `^`：次方，如 `a^b`，即 `a` 的 `b` 次方。

---

## 类型

### table

table 类型是 lua 中强大的数据结构，也是唯一的数据结构，可以看成是数组或字典。

lua 使用 `{}` 来定义一个 table。

---

## 函数

---

## 其他笔记

[Lua视频清单](Lua_Videos.md)

